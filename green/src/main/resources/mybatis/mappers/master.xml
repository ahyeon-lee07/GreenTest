<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.master">
	<resultMap id="couponResult" type="couponVO">
		<result property="couponId" column="couponId" />
		<result property="couponName" column="couponName" />
		<result property="couponContent" column="couponContent" />
		<result property="couponPay" column="couponPay" />
		<result property="couponPeroid_start" column="couponPeroid_start" />
		<result property="couponPeroid_end" column="couponPeroid_end" />
		<result property="useYN" column="useYN" />
		<result property="discountType" column="discountType" />
		<result property="couponDate" column="couponDate" />

	</resultMap>


	<!-- 등록========================================================================================== -->

	<!-- 쿠폰등록 (쿠폰명, 쿠폰혜택, 할인타입, 할인가, 할인시작일, 하일종료일, 사용여부) -->
	<insert id="couponAdd" parameterType="couponVO">
		<![CDATA[
		 CALL couponAdd_PRO(#{couponName}, #{couponContent}, #{discountType}, #{couponPay}, #{couponPeroid_start}, #{couponPeroid_end}, #{useYN});
		]]>
	</insert>

	<!-- /등록========================================================================================== -->
	<!-- 조회========================================================================================== -->

	<!-- 쿠폰 조회 -->
	<select id="selectCouponList" resultType="hashmap"
		parameterType="hashmap">
    <![CDATA[
       SELECT 
			*
		FROM 
			coupon
		ORDER BY couponDate DESC LIMIT #{pageStart}, #{perPageNum};
    ]]>
	</select>
	
	<!-- 리스트개수 -->
	<select id="listCount" resultType="Integer" >
    <![CDATA[
       SELECT 
			COUNT(*)
		FROM 
			coupon
    ]]>
	</select>

	<!-- /조회========================================================================================== -->

	<!-- 수정========================================================================================== -->
	
	<!-- 관리자 쿠폰 리스트 사용여부 변경 -->
	<update id="useYNChk" parameterType="hashmap">
		<![CDATA[
		UPDATE 
			coupon
		SET
		    coupon.useYN = #{value}
		WHERE
			coupon.couponId = #{id};
	 	]]>
	</update>

	<!-- /수정========================================================================================== -->

	<!-- 삭제========================================================================================== -->


	<!-- /삭제========================================================================================== -->







</mapper>